#
#Εργαστήριο ΛΣ 1 / Άσκηση 1 / 2022 - 23
#Ονοματεπώνυμο: Νικόλαος Θωμάς
#ΑΜ: 21390068
#
#Ερώτηση 1.
#Δημιουργήστε στον τρέχοντα κατάλογο το αρχείο 'ask1.txt' με τα ακόλουθα περιεχόμενα (όνομα, επώνυμο,
#username, ΤΚ, περιοχή, τηλ.), και εμφανίστε το στη συνέχεια στην οθόνη, με αριθμημένες τις γραμμές του.
#George Pappas george2 12136 Peristeri -------
#Nick Nikolaoy nick23 12232 Aigaleo 5314555
#George Georgioy george583 11132 Athens -------
#Helen Georgioy helen3 12136 Peristeri 5748456
#Nick Pappas nick4 11223 Aigaleo 5324123
#Helen Ioannoy helen367 13222 Athens -------
#Helen Thanoy helen36 11132 Peristeri 9718345
#Vasilis Mamalis vas32 12345 Dafni 9738383
#
#Απάντηση: Για την δημιουργία του αρχείου θα χρησιμοποιήσουμε την εντολή touch ask1.txt. Για να το εμφανίσουμε 
#με αριθμημένες τις γραμμές του στην οθόνη θα χρησιμοποιήσουμε την εντολή cat -n ask1.txt.
#
#Αποτέλεσμα εκτέλεσης της εντολής:
#
#    1	George Pappas george2 12136 Peristeri -------
#    2	Nick Nikolaoy nick23 12232 Aigaleo 5314555
#    3	George Georgioy george583 11132 Athens -------
#    4	Helen Georgioy helen3 12136 Peristeri 5748456
#    5	Nick Pappas nick4 11223 Aigaleo 5324123
#    6	Helen Ioannoy helen367 13222 Athens -------
#    7	Helen Thanoy helen36 11132 Peristeri 9718345
#    8	Vasilis Mamalis vas32 12345 Dafni 9738383
#

cat -n ask1.txt

#Ερώτηση 2.
#Τρέξτε την εντολή cal -3 > calfile.txt και εξηγείστε τι ακριβώς κάνει.
#
#Απάντηση: Η εντολή αυτή, δημιουργεί το αρχείο calfile.txt και αποθηκεύει σε αυτό τον μήνα που έχουμε τώρα,
#τον προηγούμενο και τον επόμενο.
#
#Ερώτηση 3.
#Συνενώστε τα αρχεία calfile.txt και ask1.txt σε ένα αρχείο με όνομα full.txt
#
#Απάντηση:

cat ask1.txt calfile.txt > full.txt

#Ερώτηση 4.
#Εμφανίστε στην οθόνη τα πέντε πιο πρόσφατα τροποποιημένα αρχεία του καταλόγου σας. 
#
#Απάντηση: Θα χρησιμοποιήσουμε την εντολή ls -lt η οποία θα εμφανίσει κάτι σαν αυτό:
#	-rw-rw-r-- 1 * *  996 Νοε   4 09:10 full.txt
#	-rw-rw-r-- 1 * *  643 Νοε   4 09:09 calfile.txt
#	-rw-rw-r-- 1 * * 2263 Νοε   2 18:36 21390068.G3.EX1.txt
#το οποίο μας δείχνει τα πιο πρόσφατα τροποποιημένα αρχεία.

ls -lt | head -6

#Ερώτηση 5.
#Δημιουργήστε έναν κατάλογο με όνομα 'mydir1'. Μεταβείτε σε αυτόν και στη συνέχεια αντιγράψτε εκεί (χωρίς
#να αλλάξετε κατάλογο) το αρχείο 'full.txt' (από το γονικό κατάλογο). Μετονομάστε το εν συνεχεία σε 'new.txt'.
#Επιστρέψτε στο γονικό κατάλογο. Διαγράψτε τον κατάλογο 'mydir1' και τα περιεχόμενά του.
#
#Απάντηση:

mkdir mydir1;
cd mydir1;
cp ../full.txt ../mydir1;
mv full.txt new.txt;
cd ..;
rm mydir1/new.txt;
rmdir mydir1;

#Ερώτηση 6.
#Δώστε τις εντολές που θα εμφανίσουν: (α) όλα τα αρχεία του καταλόγου /usr με πληροφορίες για το inode
#τους και το μέγεθος τους σε blocks. (β) όλα τα περιεχόμενα του δέντρου καταλόγων και υποκαταλόγων
#(αναδρομικά) που βρίσκονται κάτω από τον κατάλογο /usr, με πλήρεις πληροφορίες για κάθε ένα από αυτά
#και εμφανιζόμενα σταδιακά, σελίδα προς σελίδα.
#
#Απάντηση:

ls -lsi /usr

#Ερώτηση 7.
#Δημιουργήστε έναν κατάλογο με όνομα 'testdir1'. Μεταβείτε σε αυτόν και φτιάξτε εκεί ένα hard link (με το
#όνομα 'ask1link') προς το αρχείο 'ask1.txt' του γονικού καταλόγου. Βεβαιωθείτε (δίνοντας την κατάλληλη
#εντολή και εξηγώντας τι βλέπετε) ότι έχει δημιουργηθεί και ότι δεν είναι symbolic (soft) link.
#
#Απάντηση:

ln ../ask1.txt ask1link
ln -l ../ask1.txt ask1link

#Ερώτηση 8.
#Μπείτε στο αρχείο 'ask1link' και διαγράψτε την τελευταία του γραμμή. Βεβαιωθείτε στη συνέχεια ότι η αλλαγή
#αυτή έχει γίνει και στο αρχείο 'ask1.txt'.
#
#Απάντηση:

#Ερώτηση 9.
#Δημιουργήστε ένα κατάλογο kat1 και μέσα σε αυτόν δύο αρχεία, file1 και file2, με περιεχόμενο τη λέξη 'one' το
#ένα και τη λέξη 'two' το άλλο. Τρέξτε (μέσα στον κατάλογο kat1) την εντολή 'cp *' και εξηγήστε το αποτέλεσμα.
#Στη συνέχεια τρέξτε την εντολή 'mv *' και εξηγήστε το αποτέλεσμα.
#
#Απάντηση: Η εντολή cp * αντιγράφει τα περιεχόμενα του file1 στο file2 γιατι το '*' είναι ένα wildcard. Αφού το 1<2 
#το η εντολή θα είναι κάπως έτσι cp file1 file2 για αυτό και το αποτέλεσμα. Αντίστοιχα με την εντολή mv * το αρχείο file1
#διαγράφεται και μένει μόνο το file2. Η εντολή είναι mv file1 file2.
#
#Ερώτηση 10.
#Εμφανίστε τις γραμμές του αρχείου 'ask1.txt' οι οποίες τελειώνουν με ένα ή περισσότερα συνεχόμενα ψηφία. 
#
#Απάντηση:

grep -h "[0-9]$" ask1.txt

#Ερώτηση 11.
#Εμφανίστε τις γραμμές του αρχείου 'ask1.txt' οι οποίες περιέχουν μεν το πρότυπο 'Pap' αλλά δεν περιέχουν το
#πρότυπο 'Aig'.
#
#Απάντηση:

grep -P 'Pap(?!.*Aig)' ask1.txt

#Ερώτηση 12.
#Εμφανίστε τις γραμμές του αρχείου 'ask1.txt' οι οποίες δεν αρχίζουν με 'G' ή 'N' και περιέχουν εν συνεχεία
#(κάπου στα περιεχόμενά τους) τα πρότυπα 'Geo' και 'Per' με αυτή τη σειρά.'
#
#Απάντηση:

grep "Geo\|Per" ask1.txt | grep -v "^G\|^N"

#Ερώτηση 13.
#Πόσοι χρήστες που το username τους δεν αρχίζει από 'ls1' είναι συνδεδεμένοι στο σύστημα ?
#
#Απάντηση:

w | grep -v '^ls1'

#Ερώτηση 14.
#Εμφανίστε όλες τις διεργασίες χρηστών (αλλ/σης) που τρέχουν αυτή τη στιγμή στο σύστημα.
#
#Απάντηση:

ps -aux

#Ερώτηση 15.
#Πόσες διεργασίες χρηστών (αλλ/σης) τρέχουν στο σύστημα και τελειώνει το όνομά τους με 'sh' ?
#
#Απάντηση:

ps -aux | grep -h *sh

#Ερώτηση 16. 
#Ποιες διεργασίες (πάσης μορφής) τρέχουν αυτή τη στιγμή από το λογαριασμό του διαχειριστή ?
#
#Απάντηση:

ps -aux | grep ^root

#Ερώτηση 17. 
#Πόσα αρχεία του τρέχοντος καταλόγου σας (μόνο του τρέχοντος - όχι και των υποκαταλόγων του) έχουν
#permissions 'r' από τους πάντες, ‘w’ μόνο από τον ιδιοκτήτη, και 'x' από κανέναν ?
#
#Απάντηση:

find -perm 644

#Ερώτηση 18.
#Βρείτε τους καταλόγους του συστήματος που το όνομά τους αρχίζει από 't'.
#
#Απάντηση:

ls -d t*

#Ερώτηση 19. 
#Να βρείτε και να παρουσιάσετε στην οθόνη με πλήρεις πληροφορίες όλα τα αρχεία με όνομα που αρχίζει από
#tty και βρίσκονται στον κατάλογο /dev.
#
#Απάντηση:

ls -all -d /dev/tty*

#Ερώτηση 20.
#Ταξινομήστε τα περιεχόμενα του αρχείου 'ask1.txt' ως προς το username σε φθίνουσα σειρά.
#
#Απάντηση:

sort -r ask1.txt -k 3

#Ερώτηση 21. 
#Ταξινομήστε τα '.c' αρχεία του καταλόγου στον οποίον δουλεύετε ως προς το μέγεθός τους.
#
#Απάντηση:

ls -l *.c | sort -nk 5

#Ερώτηση 22. 
#Ταξινομήστε τα αρχεία του λογαριασμού σας με permissions 755 ως προς το μέγεθός τους.
#
#Απάντηση:

find -perm 755 | ls -l | sort -nk 5

#Ερώτηση 23. 
#Ταξινομήστε όλα τα περιεχόμενα του καταλόγου /dev κατά πρώτον ως προς τον owner και κατά δεύτερον ως
#προς το group και αποθηκεύστε το output στο αρχείο 'binfiles.txt'.
#
#Απάντηση:

ls -l | sort -k 3 > binfiles.txt
ls -l | sort -k 4 >> binfiles.txt

#Ερώτηση 24. 
#Φτιάξτε ένα αρχείο που θα περιέχει πληροφορίες μόνο για τους συνδεδεμένους χρήστες που το username
#τους αρχίζει από 'ls1', ταξινομημένο ως προς την ημερομηνία και ώρα σύνδεσή τους.
#
#Απάντηση:

who | grep 'ls1*' | sort -nk3 -nk4 > users.txt

#Ερώτηση 25. 
#Αλλάξτε στο αρχείο 'ask1.txt' το όνομα 'Nick' (όπου συναντάται) σε 'Nickolaos'. 
#
#Απάντηση:

sed -i 's/Nick/Nickolaos/g' ask1.txt

#Ερώτηση 26.
#Έστω τα ακόλουθα items του file system με protection strings: (α) '-rwxr-x--x', (β) 'drwxr-xr-- ' και (γ) 'drwx--x--x.
#Εξηγείστε τι είδους items είναι και ποια τα δικαιώματα πρόσβασης user, group και others σε αυτά.
#
#Απάντηση:
#
#Το (α) είναι ένα αρχείο. Ο user έχει δικαιώματα για το διάβασμα, το γράψιμο και την εκτέλεση του αρχείου.
#Το group έχει δικαιώματα για το διάβασμα και την εκτέλεση του αρχείου.
#Οι others έχουν δικαιώματα μόνο για την εκτέλεση του αρχείου.
#Το (β) είναι ένας κατάλογος. Ο user έχει δικαιώματα για την ανάγνωση, την εγγραφή και την πρόσβαση στον κατάλογο.
#Το group έχει δικαιώματα για την ανάγνωση του καταλόγου και την εκτέλεση του καταλόγου (Επιτρέπεται η μεταφορά στον κατάλογο).
#Οι others έχουν δικαιώματα μόνο για την ανάγνωση του καταλόγου (Επιτρέπεται να δει κάποιος το περιεχόμενο του καταλόγου).
#Το (γ) είναι ένα αρχείο. Ο user έχει δικαιώματα για την ανάγνωση, την εγγραφή και την πρόσβαση στον κατάλογο.
#Το group έχει δικαιώματα μόνο για την πρόσβαση στον κατάλογο.
#Οι others έχουν δικαιώματα μόνο για την πρόσβαση στον κατάλογο.

#Ερώτηση 27.
#Αλλάξτε τα permissions όλων των αρχείων του καταλόγου 'testdir1' έτσι ώστε να έχουν δικαίωμα εκτέλεσης και
#εγγραφής μόνο ο ιδιοκτήτης, ενώ δικαίωμα ανάγνωσης να έχουν όλοι.
#
#Απάντηση:

chmod -R 744 testdir1

#Ερώτηση 28.
#Αλλάξτε τα permissions του καταλόγου 'testdir1' έτσι ώστε να έχουν δικαίωμα πρόσβασης (enter/run) όλοι οι
#χρήστες, δικαίωμα δημιουργίας και διαγραφής αρχείων μόνο ο ιδιοκτήτης, ενώ δικαίωμα ανάγνωσης να έχουν
#τόσο ο ιδιοκτήτης όσο και οι χρήστες του group του αρχείου.
#
#Απάντηση:

chmod 751 testdir1

#Ερώητηση 29. 
#Δημιουργήστε έναν νέο χρήστη στο σύστημά σας με username 'myfriend'. Αλλάξτε στη συνέχεια τον ιδιοκτήτη
#του αρχείου 'ask1.txt' σε 'myfriend' και μετακινήστε το στο working directory του. Περιορίστε τέλος το
#διαθέσιμο χώρο αποθήκευσης στο δίσκο για το συγκεκριμένο χρήστη στα 10MB.
#
#Απάντηση:

useradd -m -d /home/myfriend myfriend
chown myfriend ask1.txtmv ask1.txt /home/myfriend
quota myfriend 10

#Ερώητησ 30.
#Δημιουργείστε τα αρχεία f1, f2, f3, f4, f5, f6 ,f7 με τα εξής δικαιώματα:
# f1, 757
# f2, 313
# f3, 010
# f4, 642
# f5, 551
# f6, 133
# f7, 111
#Με χρήση της εντολής ls –l και διοχετεύοντας τα αποτελέσματά της στην
#εντολή egrep να βρείτε τα αρχεία όπου:
#a. To group έχει δικαιώματα r-x.
#b. Ο user και οι others έχουν ακριβώς τα ίδια δικαιώματα
#c. Ο user, το group και οι others έχουν τα ίδια δικαιώματα για write
#d. Ο user, το group και οι others έχουν τα ίδια δικαιώματα για write και execute
#e. To group και οι others έχουν τα ίδια δικαιώματα για read και execute
#
#Απάντηση:

#a. To group έχει δικαιώματα r-x.

ls -l | egrep '^....r-x'

#b. Ο user και οι others έχουν ακριβώς τα ίδια δικαιώματα

ls -l | egrep '^.(.)(.)(.)[-r][-w][-x]\1\2\3'

#c. Ο user, το group και οι others έχουν τα ίδια δικαιώματα για write

#d. Ο user, το group και οι others έχουν τα ίδια δικαιώματα για write και execute

#e. To group και οι others έχουν τα ίδια δικαιώματα για read και execute
